<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dark Chat</title>
    <link rel="icon" href="favicon.ico">
    <link href='css/style.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/font-awesome.min.css">
</head>
<body>
    <div id="up"><h1>Chat In The Dark!</h1></div>
    <div id="msgcon"></div>
    <div id="down">
        <div id="submitcon">
            <form id="inputform" action="" method="post">
                <input autocomplete="off" tabindex="1" id="inputbox" type="text" placeholder="Type here and press enter...">
                <input type="submit" style="position: absolute;visibility: hidden;">
            </form>
            <span id="timestat"></span>
            <span id="onlinestatcon"><span id="onlinestat" class="animate-flicker">Connecting...</span></span>
        </div>
    </div>
    <i class="cornerbutton fa fa-ellipsis-v" aria-hidden="true"> </i>
    <div class='cornerbox'  tabindex="-1">
        <i class="fa fa-times closecornerbox" aria-hidden="true"></i>
        <div id="panel">
                <span>Colors: <span id="colors"><span class="default">Default</span> <span class="indy">Cyan</span> <span class="tori">White</span> <span class="lacy">Persian</span> <span class="greenie">Goblin</span> <span class="nimda">Rainbow</span> <span class="john">Brown</span> <span class="blue">Blue</span> <span class="jack">Green</span> <span class="kat">Pink</span> <span class="alex">Java</span></span></span>
                <br><br>
                <span id="stats">.</span>
                <br><br>
        </div>
    </div>
    <script src="js/jquery-3.2.0.min.js"></script>
    <script>
        // flowtype
        !function(a){a.fn.flowtype=function(b){var c=a.extend({maximum:9999,minimum:1,maxFont:9999,minFont:1,fontRatio:35},b),d=function(b){var d=a(b),e=d.width(),f=e>c.maximum?c.maximum:e<c.minimum?c.minimum:e,g=f/c.fontRatio,h=g>c.maxFont?c.maxFont:g<c.minFont?c.minFont:g;d.css("font-size",h+"px")};return this.each(function(){var b=this;a(window).resize(function(){d(b)}),d(this)})}}(jQuery),$("body").flowtype({minimum:360,maximum:900,minFont:20,maxFont:40,fontRatio:25});
        $('body,html').css('opacity','1');
    </script>
    <script src="js/socket.io.min.js"></script>
    <script>
        var socketServer; 
        var webServer;
        var initObj=null;
        // socketServer = "https://app-7565237d-5888-47e8-94c8-7d5c152b8208.cleverapps.io";
        socketServer = "https://dcnew.herokuapp.com";
        
        //socketServer = "ws://dcnew-idtareq.rhcloud.com:8000";
        //webServer = "https://dcnew-idtareq.rhcloud.com";
        //webServer = "https://app-7565237d-5888-47e8-94c8-7d5c152b8208.cleverapps.io";
        //socketServer = "http://127.0.0.1";
        webServer = socketServer;

        function getInit(){
            $.ajax({
                type: "GET",
                cache: false,
                url: webServer + '/init',
                success: function(msg) {
                    initObj=msg;
                },
                fail: function(){
                    setTimeout(getInit, 1000);
                }
            });
        }
        getInit();
        
        var socket = io.connect(socketServer, {'transports': ['websocket']});
        //var socket = io.connect(socketServer);
        var socket_got_connected = false;
        socket.on('connect', function(msg){socket_got_connected=true; console.log('Got connected!');});
        
        $(document).ready(function() {
            $('#inputbox').focus();
        });

        $('input,textarea').focus(function(){
        $(this).data('placeholder',$(this).attr('placeholder'))
                .attr('placeholder','');
        }).blur(function(){
        $(this).attr('placeholder',$(this).data('placeholder'));
        });
    </script>
    <script id="vertexShader" type="x-shader/x-vertex">
        void main() {
            gl_Position = vec4( position, 1.0 );
        }
    </script>
    <script id="fragmentShader" type="x-shader/x-fragment">
        uniform vec2 u_resolution;
        uniform float u_time;
        
        vec2 rotate(vec2 point, float rads) {
            float cs = cos(rads);
            float sn = sin(rads);
            return point * mat2(cs, -sn, sn, cs);
        }	
        
        void main() {
            //vec2 st = gl_FragCoord.xy/u_resolution.xy;
            //gl_FragColor=vec4(st.x,st.y,0.0,1.0);

            float rads = radians(u_time*3.15);
            vec2 position = gl_FragCoord.xy / u_resolution.xy;
            position += rotate(position, rads);

            ///// stuff

            vec3 curr_color = vec3(0.0);

            float scale = sin(0.3 * u_time) + 5.0;
            vec2 position2 = (((gl_FragCoord.xy / u_resolution) - 0.5) * scale);
            float gradient = 0.0;
            vec3 color = vec3(0.0);
            float fade = 0.0;
            float z = 0.0;
                vec2 centered_coord = position2 - vec2(sin(u_time*0.1),sin(u_time*0.1));
            centered_coord = rotate(centered_coord, rads);
            
            for (float i=1.0; i<=30.0; i++)
            {
                vec2 star_pos = vec2(sin(i) * 250.0, sin(i*i*i) * 250.0);
                float z = mod(i*i - 10.0*u_time, 256.0);
                float fade = (256.0 - z) /256.0;
                vec2 blob_coord = star_pos / z;
                gradient += ((fade / 384.0) / pow(length(centered_coord - blob_coord), 1.1)) * ( fade);
            }
        
            curr_color += gradient;
            
            gl_FragColor = vec4(curr_color, 1.0);
        }
    </script>
    <script src="js/moment.min.js"></script>
    <script src="js/notify.min.js"></script>
    <script src="js/SplitText.min.js"></script>
    <script src="js/TweenMax.min.js"></script>
    <script src="js/Draggable.min.js"></script>
    <script src="js/ThrowPropsPlugin.min.js"></script>
    <script src="js/hammer.min.js"></script>
    <script src="js/chroma.min.js"></script>
    <script src="js/jquery.mousewheel.min.js"></script>
    <script src="js/app.js"></script>
    <!-- <script src="js/three.min.js"></script> -->
    <!-- <script src="js/3d.js"></script> -->
</body>

</html>